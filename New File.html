<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<title>Ball Sort Puzzle (Side Layout)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin:0;
    padding:0;
    background: #0a001a;
    font-family: sans-serif;
    color: #fff;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  h1 {
    font-size: 24px;
    margin: 10px 0;
    color: #ff9cec;
    text-align: center;
  }
  .game {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: flex-end;
    gap: 12px;
    margin: 15px;
    height: 120px;
    flex-grow: 1;
  }
  .tube {
    width: 38px;
    height: 110px;
    border: 2px solid #555;
    border-radius: 14px;
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
    background: rgba(255,255,255,0.04);
    box-shadow: 0 0 6px #00f5ff20;
    overflow: hidden;
    transition: transform 0.2s ease;
  }
  .tube:hover {
    transform: scale(1.05);
    cursor: pointer;
  }
  .ball {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    margin: 3px 0;
    transition: all 0.2s ease;
  }
  .btn {
    padding: 8px 14px;
    font-size: 14px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(45deg,#ff00aa,#ffc400);
    color: #fff;
    margin: 10px;
    cursor: pointer;
  }
  .confetti {
    position: fixed;
    top:0; left:0;
    width: 100%; height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: 999;
  }
  .confetti-piece {
    position: absolute;
    width: 8px; height: 8px;
    opacity: 0.8;
    animation: fall 3s linear infinite;
  }
  
  /* Advertisement Styles */
  .ad-container {
    width: 100%;
    display: flex;
    justify-content: center;
    background: rgba(0,0,0,0.2);
    padding: 8px 0;
    border-top: 1px solid #333;
    border-bottom: 1px solid #333;
  }
  .ad-banner {
    width: 320px;
    height: 50px;
    background: #222;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #aaa;
    font-size: 14px;
    border-radius: 4px;
    margin: 5px 0;
  }
  .ad-text {
    padding: 0 10px;
    text-align: center;
  }
  .ad-square {
    width: 250px;
    height: 250px;
    background: #222;
    margin: 15px auto;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #aaa;
    font-size: 14px;
    border-radius: 8px;
  }
  
  @keyframes fall {
    0% {transform: translateY(-20px);}
    100% {transform: translateY(100vh);}
  }
</style>

<!-- First Adsterra Script -->
<script type='text/javascript' src='//pl26816339.profitableratecpm.com/55/b0/d8/55b0d89811f27e46961ddcfa957cba48.js'></script>
</head>
<body>
<!-- Top Adsterra Banner -->
<div class="ad-container">
  <div class="ad-banner">
    <script type="text/javascript">
      atOptions = {
        'key' : '2a7421eafe69bdf6363ddc5c275659c6',
        'format' : 'iframe',
        'height' : 50,
        'width' : 320,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/2a7421eafe69bdf6363ddc5c275659c6/invoke.js"></script>
  </div>
</div>

<h1>ðŸŽ¨ Ball Sort Side Puzzle</h1>
<div class="game" id="game"></div>

<!-- Middle Square Ad (shown after some gameplay) -->
<div class="ad-square" id="midAd" style="display:none;">
  <!-- This can be used for another ad unit if needed -->
</div>

<button class="btn" onclick="resetGame()">ðŸ”„ Restart</button>

<!-- Bottom Ad Container -->
<div class="ad-container">
  <!-- This space can be used for additional ads -->
</div>

<div class="confetti" id="confetti"></div>
<audio id="bgMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" autoplay loop></audio>
<audio id="moveSound" src="https://freesound.org/data/previews/522/522304_11684339-lq.mp3"></audio>
<audio id="winSound" src="https://freesound.org/data/previews/276/276033_4608817-lq.mp3"></audio>

<script>
const colors = ['#ff007f','#00ff90','#00b0ff','#ffcc00'];
const tubes = [];
let selectedBall=null;
let moveCount=0;

function createBall(color){
  const ball=document.createElement('div');
  ball.className='ball';
  ball.style.background=color;
  ball.style.boxShadow=`0 0 8px ${color}`;
  return ball;
}

function createTube(){
  const tube=document.createElement('div');
  tube.className='tube';
  tube.addEventListener('click',()=>handleTubeClick(tube));
  return tube;
}

function handleTubeClick(tube){
  if(selectedBall){
    if(tube.childElementCount<3){
      tube.appendChild(selectedBall);
      selectedBall.style.transform='';
      selectedBall=null;
      document.getElementById('moveSound').play();
      moveCount++;
      
      // Show mid-game ad after 10 moves
      if(moveCount === 10) {
        document.getElementById('midAd').style.display = 'flex';
      }
      
      checkWin();
    }
  }else if(tube.childElementCount>0){
    selectedBall=tube.lastElementChild;
    selectedBall.style.transform='translateY(-20px)';
  }
}

function resetGame(){
  const game=document.getElementById('game');
  game.innerHTML='';
  document.getElementById('confetti').innerHTML='';
  document.getElementById('midAd').style.display = 'none';
  tubes.length=0;
  moveCount=0;

  for(let i=0;i<6;i++){
    const tube=createTube();
    game.appendChild(tube);
    tubes.push(tube);
  }

  let balls=[];
  colors.forEach(c=>{for(let i=0;i<3;i++)balls.push(c)});
  balls=balls.sort(()=>Math.random()-0.5);

  balls.forEach(c=>{
    let placed=false;
    while(!placed){
      const t=tubes[Math.floor(Math.random()*4)];
      if(t.childElementCount<3){
        t.appendChild(createBall(c));
        placed=true;
      }
    }
  });
}

function checkWin(){
  let win=true;
  for(let t of tubes){
    if(t.childElementCount==0) continue;
    const fc=t.children[0].style.background;
    for(let b of t.children){
      if(b.style.background!=fc) { win=false; break; }
    }
    if(t.childElementCount!=0&&t.childElementCount!=3) win=false;
  }
  if(win){
    document.getElementById('winSound').play();
    launchConfetti();
    
    // Show ad on win
    document.getElementById('midAd').style.display = 'flex';
  }
}

function launchConfetti(){
  const c=document.getElementById('confetti');
  for(let i=0;i<40;i++){
    const p=document.createElement('div');
    p.className='confetti-piece';
    p.style.background=colors[Math.floor(Math.random()*colors.length)];
    p.style.left=Math.random()*100+'vw';
    p.style.animationDelay=Math.random()*3+'s';
    c.appendChild(p);
  }
}

resetGame();
</script>
</body>
</html>